## 2、单例模式

#### 1、单例模式，单线程

**特点**：

- 私有化构造方法和实例属性，为防止地方创建
- 静态化实例属性和`getInstance()`方法，可以不实例化，就直接用类访问
- 懒汉式先创建再取，饿汉式先取后创建，为了内存性能，当然饿汉式更加好。

**缺点**：

- 仅仅适用于单线程。如果在多线程下，还未创建实例时，多个线程就会同时创建实例，造成非单例。

~~~java
//懒汉式
public class Singleton{
    private Singleton(){}
    private final static Singleton instance = new Singleton();
    public static Singleton getInstance(){
        return instance;
    }
}

//饿汉式(推荐)
public class Singleton{
    private Singleton(){}
    private static Singleton instance = null;
    public static getInstance(){
        if(instance==null){
            instance = new Singleton();
        }
        return instance;
    }
}
~~~



#### 2、单例模式，饿汉式，多线程安全

**线程安全：加了同步锁，导致多线程下，某个时刻只有一个线程获得同步锁。释放之后，其他线程才能访问。**

**缺点：所有的线程都需要先判断一下，在获取实例，降低了性能。**

~~~java
public static Singleton(){
    private Singeleton(){}
    private static Singleton instance = null;
    
    public static synthronized Singleton getInstance(){
        if(instance==null){
            instance = new Singleton();
        }
        return instance;
    } 
}
~~~

